version: 1
applications:
  - appRoot: apps/shell
    frontend:
      phases:
        preBuild:
          commands:
            - rm -rf node_modules
            - rm -rf .yarn/cache
            - yarn install --frozen-lockfile
            - yarn -v
        build:
          commands:
            - yarn build shell --verbose
      artifacts:
        baseDirectory: dist/apps/shell/.next
        files:
          - '**/*'
      cache:
        paths:
          - .yarn/cache/**/*
      buildPath: /
  - appRoot: apps/onboarding
    frontend:
      phases:
        preBuild:
          commands:
            - rm -rf node_modules
            - rm -rf .yarn/cache
            - yarn install --frozen-lockfile
            - yarn -v
        build:
          commands:
            - yarn build onboarding --verbose
      artifacts:
        baseDirectory: dist/apps/onboarding/.next
        files:
          - '**/*'
      cache:
        paths:
          - .yarn/cache/**/*
      buildPath: /
  - appRoot: apps/traceability
    env:
      variables:
        key: value
    frontend:
      phases:
        preBuild:
          commands:
            - rm -rf node_modules
            - rm -rf .yarn/cache
            - yarn install --frozen-lockfile
            - yarn -v
        build:
          commands:
            - yarn build traceability --verbose
      artifacts:
        baseDirectory: dist/apps/traceability/.next
        files:
          - '**/*'
      cache:
        paths:
          - .yarn/cache/**/*
      buildPath: /
  